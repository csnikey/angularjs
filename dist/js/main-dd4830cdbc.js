!function(){document.addEventListener("DOMContentLoaded",function(){var e=document.documentElement,t=e.clientWidth;t>640&&(t=640),e.style.fontSize=t/7.5+"px"},!1)}();var app=angular.module("app",["ui.router","ngFileUpload","me-lazyload"]);app.run(["$rootScope","$state","$stateParams","$location","$window","indexData",function(e,t,a,s,o,n){e.$state=t}]),app.config(["$stateProvider","$urlRouterProvider","$httpProvider","$locationProvider",function(e,t,a,s){a.interceptors.push(HttpInterceptor),t.otherwise("/index/questions"),e.state("index",{abstract:!0,url:"/index",templateUrl:"pages/index.html"}).state("index.questions",{url:"/questions",templateUrl:"pages/questions.html",controller:"indexCtrl"})}]),$("#file").change(function(){var e=$(this).val();console.log(e),$.post("http://test.yilian.zhuojianchina.com/weixin/hocus.htm?action=uploadImg",{picture:e},function(e){console.log(e)})});var app=angular.module("app",[]);app.controller("indexCtrl",["$scope",function(e){e.items=[1,3,20]}]),app.controller("baseCtrl",["$scope",function(e){e.items=[1,7e3,20]}]),function(e,t,a){app.controller("indexCtrl",["$scope","$state",function(e,t){e.items=[1,11,3]}])}(window,document),function(e,t,a){app.controller("caihuaCtrl",["$scope","$stateParams","indexData",function(e,t,a){var s="/api/"+root+"/index/artistic";a.getData(s).success(function(t){e.data=t.data}),e.tabs=[{title:"付费医生",type:"answer",float:"fl"},{title:"人气医生",type:"authen",float:"fr"}],t.type?e.type=t.type:e.type=0}])}(window,document),function(e,t,a){function s(e,a,s,o){function n(){f.keywords="",f.case=[],f.user=[]}function r(e){f.keywords=e,f.case=[],f.user=[],p(f.keywords,f.type)}function i(e){f.placeholder=0==e?"请输入搜索关键字":"case"===e?"搜索病例关键字":"搜索用户关键字",f.type=e}function c(e,t){return"user"===t?-1!=e.nickname.search(new RegExp(f.keywords,"i"))?e.search_content=a.trustAsHtml("昵称："+e.nickname.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>")):-1!=e.name.search(new RegExp(f.keywords,"i"))?e.search_content=a.trustAsHtml("姓名："+e.name.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>")):-1!=e.hospital.search(new RegExp(f.keywords,"i"))?e.search_content=a.trustAsHtml("医院："+e.hospital.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>")):-1!=e.administrative.search(new RegExp(f.keywords,"i"))?e.search_content=a.trustAsHtml("科室："+e.administrative.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>")):-1!=e.zhicheng.search(new RegExp(f.keywords,"i"))&&(e.search_content=a.trustAsHtml("科室："+e.zhicheng.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>"))):-1!=e.question.search(new RegExp(f.keywords,"i"))?e.search_content=a.trustAsHtml("问题："+e.question.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>")):-1!=e.description.search(new RegExp(f.keywords,"i"))?e.search_content=a.trustAsHtml("描述："+e.description.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>")):e.exts.length>1&&-1!=e.ext[0].search(new RegExp(f.keywords,"i"))&&(e.search_content=a.trustAsHtml("补充："+e.exts[0].description.replace(new RegExp(f.keywords,"i"),"<strong>"+f.keywords+"</strong>"))),e}function p(e,t){e&&("0"===t?(u(e,3),d(e,3)):"user"===t?d(e,20):u(e,20))}function u(e,t){var a="/api/"+root+"/index/search?type=0&limit="+t+"&keywords="+e;s.get(a).success(function(e){0==e.status?(e.data.data.forEach(function(e){f.case.push(c(e,0))}),f.is_last=e.data.is_last):layer.msg(e.msg)})}function d(e,t){var a="/api/"+root+"/index/search?type=user&limit="+t+"&keywords="+e;s.get(a).success(function(e){0==e.status?(e.data.data.forEach(function(e){f.user.push(c(e,"user"))}),f.is_last=e.data.is_last):layer.msg(e.msg)})}function l(e,t){i(t),r(e)}function g(e,t){e&&("user"===t?(h(e,20),f.case=[]):(y(e,20),f.user=[]))}function y(e,t){f.page=f.page+1;var a="/api/"+root+"/index/search?type=0&limit="+t+"&keywords="+e+"&page="+f.page;s.get(a).success(function(e){0==e.status?(f.is_last=e.data.is_last,0==e.data.data.length?layer.msg("已经没有数据了呀"):e.data.data.forEach(function(e){f.case.push(c(e,0))})):layer.msg(data.msg)})}function h(e,t){f.page=f.page+1;var a="/api/"+root+"/index/search?type=user&limit="+t+"&keywords="+e+"&page="+f.page;s.get(a).success(function(e){0==e.status?(f.is_last=e.data.is_last,0==e.data.data.length?layer.msg("已经没有数据了呀"):e.data.data.forEach(function(e){f.user.push(c(e,"user"))})):layer.msg(data.msg)})}try{t.getElementById("mta").onclick()}catch(e){console.log(e)}var f=this;f.type="0",f.page=1,f.is_last=!1,f.case=[],f.user=[],f.placeholder="请输入搜索关键字",f.del=n,f.search=r,f.getMore=g,f.goMore=l,f.change=i;var w=o.search();f.keywords=w.keywords,p(f.keywords,f.type)}s.$inject=["$scope","$sce","ajax","$location"],angular.module("app").controller("searchCtrl",s)}(window,document),function(e,t,a){function s(t,a,s,o,n){function r(e){t.page=t.page+1;var a="/api/"+root+"/index/questions?type="+e+"&page="+t.page;"jingpin"==e?a="/api/"+root+"/index/shares?page="+t.page:"matches"==e&&(a="/api/"+root+"/index/matches?page="+t.page),o.get(a).success(function(e){0==e.status?0==e.data.data.length?layer.msg("已经没有数据了"):e.data.data.forEach(function(e){t.data.push(e)}):layer.msg(e.msg)})}function i(a,o,r,i,c){var p=(e.event,t.data),u=t.type,d=t.page,l=a;n.setData(p,u,d,l),"1"==i?s.go("pDetail",{uid:a}):o==r?s.go("myDetail",{uid:a}):7==c?location.href="/?#/detail2/"+a:s.go("detail",{uid:a})}function c(e,t){for(var a=!1,s=0,o=t.length;s<o;s++)if(e==t[s].id){a=!0;break}return a}var p=location.search,u="/api/"+root+"/index/questions";t.type="new",t.page=1,t.getMore=r,t.goDetail=i,t.isPay=c,p&&(u+=p),n.getData().flag?n.init(t):o.get(u).success(function(e){0==e.status?(t.data=e.data.data,p&&0==a.isFocus&&$(".show-share").removeClass("hide")):-5==e.status&&layer.msg(e.data)}),weishare(),t.tabs=[{title:"提问榜",type:"new",float:"fl"},{title:"精品榜",type:"jingpin",float:"fl"}]}s.$inject=["$scope","$rootScope","$state","ajax","store"],angular.module("app").controller("questionsCtrl",s)}(window,document),function(e,t,a){function s(t,a,s,o){function n(e){t.page=t.page+1;var a="/api/"+root+"/index/questions?type=pay_to_see_hot&page="+t.page;a="hot"==e?"/api/"+root+"/index/questions?type=pay_to_see_hot&page="+t.page:"/api/"+root+"/index/questions?type=pay_to_see&page="+t.page,s.get(a).success(function(e){0==e.status?0==e.data.data.length?layer.msg("已经没有数据了"):(i(e),c(e)):layer.msg(e.msg)})}function r(s,n,r,i,c){var p=(e.event,t.data),u=t.type,d=t.page,l=s;o.setData(p,u,d,l),"1"==i?a.go("pDetail",{uid:s}):n==r?a.go("myDetail",{uid:s}):7==c?location.href="/?#/detail2/"+s:a.go("detail",{uid:s})}function i(e){e.data.data.forEach(function(e){e.description=e.description.substr(0,10)+"**********",e.question_exts.forEach(function(e){e.description=e.description.substr(0,10)+"**********"})})}function c(e){t.data=t.data.concat(e.data.data)}function p(e,t){for(var a=!1,s=0,o=t.length;s<o;s++)if(e==t[s].id){a=!0;break}return a}var u="/api/"+root+"/index/questions?type=pay_to_see_hot";root;t.type="hot",t.page=1,t.getMore=n,t.goDetail=r,t.isPay=p,t.data=[],o.getData().flag?o.init(t):s.get(u).success(function(e){0==e.status?(i(e),c(e)):-5==e.status&&layer.msg(e.data)}),weishare(),t.tabs=[{title:"热门",type:"hot",float:"fl"},{title:"最新",type:"new",float:"fr"}]}s.$inject=["$scope","$state","ajax","store"],angular.module("app").controller("paycasesCtrl",s)}(window,document);